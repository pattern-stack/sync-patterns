# TUI Explorer - Final Architecture

## System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              Terminal                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                        Ink (React for CLI)                            â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚                      TUI Explorer App                           â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ Uses
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         src/generated/                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  entities/   â”‚  â”‚  schemas/    â”‚  â”‚   hooks/     â”‚  â”‚  config.ts   â”‚    â”‚
â”‚  â”‚  (wrappers)  â”‚  â”‚  (Zod)       â”‚  â”‚  (TanStack)  â”‚  â”‚  (sync mode) â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ HTTP/WebSocket
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Pattern Stack Backend                                   â”‚
â”‚                        (FastAPI + PostgreSQL)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Directory Structure

```
sync-patterns/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ cli/
â”‚   â”‚   â”œâ”€â”€ index.ts                    # Main CLI entry (adds explore command)
â”‚   â”‚   â””â”€â”€ commands/
â”‚   â”‚       â”œâ”€â”€ generate.ts             # Existing generator
â”‚   â”‚       â””â”€â”€ explore.ts              # NEW: TUI launcher
â”‚   â”‚
â”‚   â”œâ”€â”€ generators/                     # Existing generators (unchanged)
â”‚   â”‚
â”‚   â””â”€â”€ tui/                            # NEW: TUI Explorer
â”‚       â”œâ”€â”€ App.tsx                     # Root component + routing
â”‚       â”‚
â”‚       â”œâ”€â”€ components/
â”‚       â”‚   â”œâ”€â”€ EntityList.tsx          # Entity selection view
â”‚       â”‚   â”œâ”€â”€ DataTable.tsx           # Table view with pagination
â”‚       â”‚   â”œâ”€â”€ DetailView.tsx          # Single record view
â”‚       â”‚   â”œâ”€â”€ FormView.tsx            # Create/edit forms (Phase 2)
â”‚       â”‚   â”œâ”€â”€ SearchBar.tsx           # Search input
â”‚       â”‚   â”œâ”€â”€ Header.tsx              # App header + sync indicator
â”‚       â”‚   â”œâ”€â”€ StatusBar.tsx           # Footer with shortcuts
â”‚       â”‚   â”œâ”€â”€ HelpOverlay.tsx         # Keyboard shortcuts modal
â”‚       â”‚   â”œâ”€â”€ Inspector.tsx           # Query inspector (Phase 3)
â”‚       â”‚   â”œâ”€â”€ Breadcrumb.tsx          # Navigation breadcrumb
â”‚       â”‚   â”œâ”€â”€ ConfirmDialog.tsx       # Delete confirmation
â”‚       â”‚   â”œâ”€â”€ ErrorView.tsx           # Error display
â”‚       â”‚   â””â”€â”€ LoadingView.tsx         # Loading spinner
â”‚       â”‚
â”‚       â”œâ”€â”€ renderers/
â”‚       â”‚   â””â”€â”€ index.ts                # Terminal field renderers (19 UITypes)
â”‚       â”‚
â”‚       â”œâ”€â”€ hooks/
â”‚       â”‚   â”œâ”€â”€ useEntity.ts            # Dynamic entity hook loader
â”‚       â”‚   â”œâ”€â”€ useNavigation.ts        # Navigation state management
â”‚       â”‚   â”œâ”€â”€ useSearch.ts            # Search/filter state
â”‚       â”‚   â”œâ”€â”€ useForm.ts              # Form state + validation
â”‚       â”‚   â””â”€â”€ useRequestLog.ts        # API request logging
â”‚       â”‚
â”‚       â””â”€â”€ utils/
â”‚           â”œâ”€â”€ entity-discovery.ts     # Find entities in generated/
â”‚           â”œâ”€â”€ terminal.ts             # Terminal capability detection
â”‚           â”œâ”€â”€ config.ts               # User config (~/.sync-patterns/)
â”‚           â””â”€â”€ error-handler.ts        # Error formatting
â”‚
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ prd/
â”‚       â”œâ”€â”€ tui-explorer.md                    # Full PRD
â”‚       â”œâ”€â”€ tui-explorer-implementation-guide.md
â”‚       â”œâ”€â”€ tui-explorer-issues.md
â”‚       â””â”€â”€ tui-explorer-architecture.md       # This file
â”‚
â””â”€â”€ package.json                        # + ink, chalk, ora, boxen
```

---

## Component Hierarchy

```
<App>
â”‚
â”œâ”€â”€ <QueryClientProvider>               # TanStack Query context
â”‚   â”‚
â”‚   â”œâ”€â”€ <Header>                        # "sync-patterns Explorer" + sync mode
â”‚   â”‚
â”‚   â”œâ”€â”€ <Navigation>                    # Route state machine
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ view: 'entities'
â”‚   â”‚   â”‚   â””â”€â”€ <EntityList>            # Scrollable entity list
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ view: 'table'
â”‚   â”‚   â”‚   â”œâ”€â”€ <SearchBar>             # "/" to search
â”‚   â”‚   â”‚   â””â”€â”€ <DataTable>             # Paginated records
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ view: 'detail'
â”‚   â”‚   â”‚   â”œâ”€â”€ <Breadcrumb>            # Orders > #123 > Customer
â”‚   â”‚   â”‚   â””â”€â”€ <DetailView>            # Grouped fields
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ view: 'form'                # Phase 2
â”‚   â”‚   â”‚   â””â”€â”€ <FormView>              # Create/edit
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ view: 'inspector'           # Phase 3
â”‚   â”‚       â””â”€â”€ <Inspector>             # Request/response viewer
â”‚   â”‚
â”‚   â”œâ”€â”€ <StatusBar>                     # Keyboard shortcuts footer
â”‚   â”‚
â”‚   â”œâ”€â”€ <HelpOverlay>                   # "?" help modal
â”‚   â”‚
â”‚   â””â”€â”€ <ErrorBoundary>                 # Crash recovery
â”‚
â””â”€â”€ </QueryClientProvider>
```

---

## Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           User Interaction                                   â”‚
â”‚                    (keyboard: â†‘â†“â†â†’ Enter Esc / q ?)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          TUI Components                                      â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ EntityList  â”‚â”€â”€â”€â–¶â”‚  DataTable  â”‚â”€â”€â”€â–¶â”‚ DetailView  â”‚â”€â”€â”€â–¶â”‚  FormView   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                  â”‚                  â”‚                  â”‚          â”‚
â”‚         â”‚ useEntities()    â”‚ useList()        â”‚ useOne(id)       â”‚ create() â”‚
â”‚         â”‚                  â”‚ useMetadata()    â”‚                  â”‚ update() â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                  â”‚                  â”‚                  â”‚
          â–¼                  â–¼                  â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Generated Entity Wrappers                               â”‚
â”‚                     (src/generated/entities/*.ts)                            â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  export function useAccounts() {                                     â”‚    â”‚
â”‚  â”‚    const mode = getSyncMode('accounts')                              â”‚    â”‚
â”‚  â”‚    if (mode === 'realtime') return useAccountsCollection()           â”‚    â”‚
â”‚  â”‚    return useAccountsQuery()                                         â”‚    â”‚
â”‚  â”‚  }                                                                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                           â”‚
                    â–¼                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      TanStack DB             â”‚  â”‚      TanStack Query          â”‚
â”‚   (realtime/offline mode)    â”‚  â”‚       (api mode)             â”‚
â”‚                              â”‚  â”‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  useLiveQuery(...)     â”‚  â”‚  â”‚  â”‚  useQuery(...)         â”‚  â”‚
â”‚  â”‚  useOptimisticMutation â”‚  â”‚  â”‚  â”‚  useMutation(...)      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                                  â”‚
               â”‚    ElectricSQL                   â”‚    Axios
               â”‚    (WebSocket)                   â”‚    (HTTP)
               â”‚                                  â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Pattern Stack Backend                                 â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   FastAPI   â”‚    â”‚  Services   â”‚    â”‚   Patterns  â”‚    â”‚ PostgreSQL  â”‚  â”‚
â”‚  â”‚   Routers   â”‚â”€â”€â”€â–¶â”‚   (CRUD)    â”‚â”€â”€â”€â–¶â”‚  (Models)   â”‚â”€â”€â”€â–¶â”‚  Database   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                              â”‚
â”‚                     GET /api/v1/accounts                                     â”‚
â”‚                     GET /api/v1/accounts/:id                                 â”‚
â”‚                     GET /api/v1/accounts/metadata                            â”‚
â”‚                     POST /api/v1/accounts                                    â”‚
â”‚                     PUT /api/v1/accounts/:id                                 â”‚
â”‚                     DELETE /api/v1/accounts/:id                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Field Rendering Pipeline

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ColumnMetadata                                       â”‚
â”‚                                                                              â”‚
â”‚  {                                                                           â”‚
â”‚    field: "actual_value",                                                    â”‚
â”‚    label: "Deal Value",                                                      â”‚
â”‚    type: "money",                          â—„â”€â”€ UIType (1 of 19)             â”‚
â”‚    format: { currency: "USD", decimals: 2 },                                â”‚
â”‚    ui_importance: "primary",                                                 â”‚
â”‚    ui_group: "financial"                                                     â”‚
â”‚  }                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Terminal Renderer Registry                              â”‚
â”‚                      (src/tui/renderers/index.ts)                           â”‚
â”‚                                                                              â”‚
â”‚  const terminalRenderers: Record<UIType, TerminalRenderer> = {              â”‚
â”‚                                                                              â”‚
â”‚    money: (value, format) => {                                              â”‚
â”‚      const formatted = formatMoney(value, format?.currency)  â—„â”€â”€ Reuse     â”‚
â”‚      return chalk.bold.green(formatted)                      â—„â”€â”€ ANSI      â”‚
â”‚    },                                                                        â”‚
â”‚                                                                              â”‚
â”‚    status: (value, format) => {                                             â”‚
â”‚      const color = statusColorMap[value] ?? 'info'                          â”‚
â”‚      return chalk[color](`â— ${value}`)                                      â”‚
â”‚    },                                                                        â”‚
â”‚                                                                              â”‚
â”‚    date: (value) => chalk.gray(formatDate(value)),                          â”‚
â”‚    boolean: (value) => value ? chalk.green('âœ“') : chalk.red('âœ—'),          â”‚
â”‚    // ... 15 more                                                            â”‚
â”‚  }                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Terminal Output                                     â”‚
â”‚                                                                              â”‚
â”‚    Deal Value        $150,000.00     â—„â”€â”€ Green, bold, formatted             â”‚
â”‚    Stage             â— closing       â—„â”€â”€ Yellow indicator                   â”‚
â”‚    Close Date        Dec 20, 2024    â—„â”€â”€ Gray, localized                    â”‚
â”‚    Is Won            âœ—               â—„â”€â”€ Red X                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 19 UIType Renderers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    UIType      â”‚    Terminal Output      â”‚    Implementation              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ text           â”‚ Hello World             â”‚ String(value)                  â”‚
â”‚ password       â”‚ â—â—â—â—â—â—â—â—                â”‚ 'â—'.repeat(8)                  â”‚
â”‚ number         â”‚ 1,234                   â”‚ formatNumber() + chalk         â”‚
â”‚ money          â”‚ $1,234.56               â”‚ formatMoney() + chalk.green    â”‚
â”‚ percent        â”‚ 45.0%                   â”‚ formatPercent() + chalk        â”‚
â”‚ date           â”‚ Dec 10, 2024            â”‚ formatDate() + chalk.gray      â”‚
â”‚ datetime       â”‚ Dec 10, 2024 2:30 PM    â”‚ formatDate(true) + chalk.gray  â”‚
â”‚ email          â”‚ user@example.com        â”‚ chalk.cyan(value)              â”‚
â”‚ url            â”‚ example.com             â”‚ chalk.cyan(domain only)        â”‚
â”‚ phone          â”‚ +1 (555) 123-4567       â”‚ chalk.cyan(value)              â”‚
â”‚ boolean        â”‚ âœ“ or âœ—                  â”‚ chalk.green/red                â”‚
â”‚ badge          â”‚ Premium                 â”‚ chalk.bgBlue(value)            â”‚
â”‚ status         â”‚ â— Active                â”‚ chalk[statusColor](â— + value)  â”‚
â”‚ entity         â”‚ ğŸ¢ Acme Inc             â”‚ icon + chalk.bold(name)        â”‚
â”‚ user           â”‚ ğŸ‘¤ John Doe             â”‚ icon + name                    â”‚
â”‚ json           â”‚ { "key": "val" }        â”‚ JSON.stringify + syntax color  â”‚
â”‚ image          â”‚ [image.png]             â”‚ chalk.dim([filename])          â”‚
â”‚ rating         â”‚ â˜…â˜…â˜…â˜…â˜†                   â”‚ â˜… filled, â˜† empty              â”‚
â”‚ color          â”‚ â–  #FF5733               â”‚ chalk.hex(value)(â– ) + hex      â”‚
â”‚ file           â”‚ ğŸ“„ document.pdf         â”‚ icon + filename                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Navigation State Machine

```
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚   START     â”‚
                              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                                 â”‚
                    â”‚         ENTITY LIST             â”‚
                    â”‚                                 â”‚
                    â”‚   > Accounts (47)               â”‚
                    â”‚     Contacts (142)              â”‚
                    â”‚     Orders (89)                 â”‚
                    â”‚                                 â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                          Enter   â”‚
                                  â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”‚                                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚        â”‚         DATA TABLE              â”‚        â”‚
          â”‚        â”‚                                 â”‚        â”‚
   Esc    â”‚        â”‚   Name     Status    Value     â”‚        â”‚  Enter
   Back   â”‚        â”‚   â”€â”€â”€â”€     â”€â”€â”€â”€â”€â”€    â”€â”€â”€â”€â”€     â”‚        â”‚  Select
          â”‚        â”‚ > Acme     â— Active  $50k      â”‚        â”‚
          â”‚        â”‚   TechCo   â—‹ Pending $25k      â”‚        â”‚
          â”‚        â”‚                                 â”‚        â”‚
          â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
          â”‚                       â”‚                           â”‚
          â”‚                   /   â”‚   Search                  â”‚
          â”‚                       â–¼                           â”‚
          â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
          â”‚        â”‚         SEARCH MODE             â”‚        â”‚
          â”‚        â”‚   Search: acme_                 â”‚        â”‚
          â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
          â”‚                                                   â”‚
          â–¼                                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                 â”‚     â”‚                                 â”‚
â”‚         ENTITY LIST             â”‚     â”‚         DETAIL VIEW             â”‚
â”‚         (return)                â”‚     â”‚                                 â”‚
â”‚                                 â”‚     â”‚   â•­â”€ Identification â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚ Name: Acme Corp           â”‚ â”‚
                                        â”‚   â”‚ Status: â— Active          â”‚ â”‚
                                        â”‚   â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â”‚
                                        â”‚                                 â”‚
                                        â”‚   â•­â”€ Financial â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚
                                        â”‚   â”‚ Deal Value: $50,000       â”‚ â”‚
                                        â”‚   â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â”‚
                                        â”‚                                 â”‚
                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                      â”‚
                                              e       â”‚       d
                                              Edit    â”‚       Delete
                                                      â–¼
                                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                        â”‚                                 â”‚
                                        â”‚         FORM VIEW               â”‚
                                        â”‚         (Phase 2)               â”‚
                                        â”‚                                 â”‚
                                        â”‚   Name: [Acme Corp_____]        â”‚
                                        â”‚   Status: > Active      â–¼       â”‚
                                        â”‚   Value:  [$50,000______]       â”‚
                                        â”‚                                 â”‚
                                        â”‚   [Ctrl+S: Save] [Esc: Cancel]  â”‚
                                        â”‚                                 â”‚
                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Sync Mode Handling

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Config Detection                                    â”‚
â”‚                     (src/generated/config.ts)                               â”‚
â”‚                                                                              â”‚
â”‚  entities: {                                                                 â”‚
â”‚    accounts: 'offline',    â”€â”€â”€â”€â”€â”€â–¶  â— Offline (IndexedDB)                   â”‚
â”‚    contacts: 'realtime',   â”€â”€â”€â”€â”€â”€â–¶  â— Realtime (ElectricSQL)                â”‚
â”‚    analytics: 'api'        â”€â”€â”€â”€â”€â”€â–¶  â—‹ API (TanStack Query)                  â”‚
â”‚  }                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Header Display                                       â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ sync-patterns Explorer                                   â— Offline   â”‚  â”‚
â”‚  â”‚ accounts (47 records)                      http://localhost:8000     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                              â”‚
â”‚  Legend:                                                                     â”‚
â”‚    â— Realtime  - Sub-second sync via ElectricSQL                            â”‚
â”‚    â— Offline   - Works offline, syncs when connected                        â”‚
â”‚    â—‹ API       - Traditional request/response                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Mutation Behavior                                       â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚      Realtime/Offline       â”‚    â”‚              API                    â”‚ â”‚
â”‚  â”‚                             â”‚    â”‚                                     â”‚ â”‚
â”‚  â”‚  1. Write to local DB       â”‚    â”‚  1. Show loading spinner            â”‚ â”‚
â”‚  â”‚  2. UI updates instantly    â”‚    â”‚  2. Wait for server response        â”‚ â”‚
â”‚  â”‚  3. Sync in background      â”‚    â”‚  3. Update UI on success            â”‚ â”‚
â”‚  â”‚  4. Show sync status:       â”‚    â”‚  4. Show error on failure           â”‚ â”‚
â”‚  â”‚     â— Pending               â”‚    â”‚                                     â”‚ â”‚
â”‚  â”‚     â— Synced                â”‚    â”‚                                     â”‚ â”‚
â”‚  â”‚     âœ— Conflict              â”‚    â”‚                                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Integration with Existing Pattern Stack

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚                          Pattern Stack Ecosystem                             â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                      â”‚
â”‚  â”‚  backend-patterns â”‚                                                      â”‚
â”‚  â”‚                   â”‚                                                      â”‚
â”‚  â”‚  Models with      â”‚â”€â”€â”€â”€ OpenAPI Spec â”€â”€â”€â”€â”                               â”‚
â”‚  â”‚  Field metadata   â”‚     (x-sync ext)     â”‚                               â”‚
â”‚  â”‚                   â”‚                      â”‚                               â”‚
â”‚  â”‚  class Account:   â”‚                      â”‚                               â”‚
â”‚  â”‚    name = Field(  â”‚                      â”‚                               â”‚
â”‚  â”‚      ui_type=     â”‚                      â”‚                               â”‚
â”‚  â”‚        "entity",  â”‚                      â”‚                               â”‚
â”‚  â”‚      ui_group=    â”‚                      â”‚                               â”‚
â”‚  â”‚        "ident"    â”‚                      â”‚                               â”‚
â”‚  â”‚    )              â”‚                      â”‚                               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚                               â”‚
â”‚                                             â–¼                               â”‚
â”‚                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚                               â”‚  sync-patterns    â”‚                         â”‚
â”‚                               â”‚                   â”‚                         â”‚
â”‚                               â”‚  sync-patterns    â”‚                         â”‚
â”‚                               â”‚    generate       â”‚                         â”‚
â”‚                               â”‚                   â”‚                         â”‚
â”‚                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                                         â”‚                                   â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚                    â”‚                    â”‚                    â”‚              â”‚
â”‚                    â–¼                    â–¼                    â–¼              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ frontend-patterns â”‚  â”‚   src/generated/  â”‚  â”‚   TUI Explorer    â”‚       â”‚
â”‚  â”‚                   â”‚  â”‚                   â”‚  â”‚                   â”‚       â”‚
â”‚  â”‚  React web app    â”‚  â”‚  entities/        â”‚  â”‚  Terminal app     â”‚       â”‚
â”‚  â”‚  using:           â”‚  â”‚  schemas/         â”‚  â”‚  using:           â”‚       â”‚
â”‚  â”‚  - DataTable      â”‚  â”‚  hooks/           â”‚  â”‚  - Same hooks     â”‚       â”‚
â”‚  â”‚  - DataBadge      â”‚  â”‚  config.ts        â”‚  â”‚  - Same schemas   â”‚       â”‚
â”‚  â”‚  - formatMoney()  â”‚  â”‚                   â”‚  â”‚  - Same config    â”‚       â”‚
â”‚  â”‚  - 19 UITypes     â”‚  â”‚                   â”‚  â”‚  - TUI renderers  â”‚       â”‚
â”‚  â”‚                   â”‚  â”‚                   â”‚  â”‚                   â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚           â”‚                      â–²                      â”‚                   â”‚
â”‚           â”‚                      â”‚                      â”‚                   â”‚
â”‚           â”‚              imports â”‚              imports â”‚                   â”‚
â”‚           â”‚                      â”‚                      â”‚                   â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                              â”‚
â”‚                    Both consume the SAME generated code                      â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## File Dependencies

```
src/cli/commands/explore.ts
    â”‚
    â”œâ”€â”€ imports â”€â”€â–¶ src/tui/App.tsx
    â”‚                   â”‚
    â”‚                   â”œâ”€â”€ imports â”€â”€â–¶ src/tui/components/EntityList.tsx
    â”‚                   â”‚                   â””â”€â”€ uses â”€â”€â–¶ src/tui/utils/entity-discovery.ts
    â”‚                   â”‚
    â”‚                   â”œâ”€â”€ imports â”€â”€â–¶ src/tui/components/DataTable.tsx
    â”‚                   â”‚                   â”œâ”€â”€ uses â”€â”€â–¶ src/tui/renderers/index.ts
    â”‚                   â”‚                   â”‚               â””â”€â”€ imports â”€â”€â–¶ @pattern-stack/frontend-patterns
    â”‚                   â”‚                   â”‚                               (formatMoney, formatDate, UIType)
    â”‚                   â”‚                   â””â”€â”€ uses â”€â”€â–¶ src/tui/hooks/useSearch.ts
    â”‚                   â”‚
    â”‚                   â”œâ”€â”€ imports â”€â”€â–¶ src/tui/components/DetailView.tsx
    â”‚                   â”‚                   â””â”€â”€ uses â”€â”€â–¶ src/tui/renderers/index.ts
    â”‚                   â”‚
    â”‚                   â”œâ”€â”€ imports â”€â”€â–¶ src/tui/components/Header.tsx
    â”‚                   â”œâ”€â”€ imports â”€â”€â–¶ src/tui/components/StatusBar.tsx
    â”‚                   â””â”€â”€ imports â”€â”€â–¶ src/tui/components/HelpOverlay.tsx
    â”‚
    â””â”€â”€ imports â”€â”€â–¶ src/generated/
                        â”œâ”€â”€ entities/*.ts    (useAccounts, useContacts, etc.)
                        â”œâ”€â”€ schemas/*.ts     (Account, Contact, etc.)
                        â””â”€â”€ config.ts        (getSyncMode, isLocalFirst)
```

---

## Key Design Decisions

| Decision | Choice | Rationale |
|----------|--------|-----------|
| **TUI Framework** | Ink 4.x | React paradigm, component-based, active community |
| **Styling** | chalk | Industry standard for terminal colors |
| **State Management** | React useState + context | Simple, no extra deps, matches generated hooks |
| **Data Fetching** | Generated hooks | Reuse sync-patterns output, consistent with web |
| **Field Rendering** | Adapter pattern | Wrap frontend-patterns formatters with ANSI |
| **Navigation** | State machine | Clear transitions, easy to reason about |
| **Config** | ~/.sync-patterns/ | Standard Unix convention |

---

## Performance Budget

| Metric | Target | Measurement |
|--------|--------|-------------|
| CLI startup | < 2s | Time to first render |
| Entity list load | < 500ms | Time to show counts |
| Table render (25 rows) | < 200ms | Time to display page |
| Table render (100 rows) | < 1s | With pagination |
| Memory usage | < 100MB | Node.js heap |
| Bundle size | < 5MB | dist/ folder |
